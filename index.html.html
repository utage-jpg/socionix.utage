<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
<meta name="theme-color" content="#0ea5e9" />
<title>ソシオニクス 16タイプ関係ビューア（モバイル最適・256ペア内蔵）</title>

<!-- OGP（X/旧Twitterのカード用。公開先に応じて画像URLを差し替えてください） -->
<meta property="og:title" content="ソシオニクス 16タイプ関係ビューア" />
<meta property="og:description" content="タイプを2つタップして関係性をその場で確認。要求±／監督±は向きもチェック。" />
<meta property="og:type" content="website" />
<meta property="og:image" content="og.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="ソシオニクス 16タイプ関係ビューア" />
<meta name="twitter:description" content="タイプを2つタップ→関係名＆説明を表示。要求±／監督±は向きも確認できます。" />
<meta name="twitter:image" content="og.png" />

<style>
  :root{
    --bg:#ffffff; --panel:#f8fafc; --ink:#0f172a; --ink-2:#334155; --muted:#64748b;
    --line:#e2e8f0; --accent:#0ea5e9; --hilite:#fde047;
  }
  *{box-sizing:border-box}
  html,body{margin:0;height:100%;background:var(--bg);color:var(--ink);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Hiragino Sans","Noto Sans JP","Yu Gothic",Meiryo,sans-serif;letter-spacing:.2px}
  .app{display:grid;grid-template-rows:auto 1fr auto;min-height:100dvh}
  header{position:sticky;top:0;background:linear-gradient(180deg,#fff, #f8fafc);border-bottom:1px solid var(--line);padding:12px 16px;z-index:20}
  .title{font-size:16px;font-weight:800}
  .sub{font-size:12px;color:var(--muted)}
  .content{display:grid;grid-template-columns:1fr;gap:12px;padding:12px;max-width:1100px;margin:0 auto;width:100%}
  @media (min-width: 960px){ .content{grid-template-columns:460px 1fr} }
  .panel{background:#fff;border:1px solid var(--line);border-radius:16px;box-shadow:0 6px 20px rgba(2,6,23,.04)}
  .left{padding:10px}
  .tabs{display:flex;gap:8px;padding:8px}
  .tab{flex:1;padding:10px 12px;border-radius:999px;border:1px solid var(--line);background:var(--panel);text-align:center;font-weight:700;cursor:pointer;touch-action:manipulation}
  .tab[aria-selected="true"]{background:linear-gradient(180deg,#e6f6fe,#fff);border-color:#bae6fd;outline:2px solid rgba(14,165,233,.15)}
  .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;padding:8px}
  .type-btn{display:grid;place-items:center;min-height:44px;border-radius:12px;border:1px solid var(--line);background:#fff;font-weight:800;cursor:pointer;user-select:none;touch-action:manipulation;font-size:14px}
  .type-btn:active{transform:scale(.98)}
  .type-btn.selected{outline:2px solid rgba(253,224,71,.9);background:#fffbeb;border-color:#facc15;box-shadow:0 4px 12px rgba(250,204,21,.25)}
  .legend{padding:6px 8px;border-top:1px dashed var(--line);color:var(--muted);font-size:12px}
  .right{display:grid;grid-template-rows:auto 1fr auto;gap:8px;padding:10px;position:relative}
  .picked{display:flex;gap:8px;flex-wrap:wrap}
  .chip{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--line);border-radius:12px;background:var(--panel);color:var(--ink-2);font-weight:700;min-height:36px}
  .rel-title{font-size:22px;font-weight:900;letter-spacing:.6px}
  .desc{border:1px solid var(--line);border-radius:12px;padding:12px;background:#fff;line-height:1.8;white-space:pre-wrap;min-height:180px}
  .controls{display:flex;gap:8px;flex-wrap:wrap}
  button.action{padding:10px 14px;border-radius:12px;border:1px solid var(--line);background:var(--panel);font-weight:800;cursor:pointer;touch-action:manipulation}
  button.action:active{transform:scale(.98)}
  .share{display:flex;gap:8px;align-items:center;margin-left:auto}
  .notice{font-size:12px;color:var(--muted)}
  footer{padding:10px 12px;color:var(--muted);font-size:12px}
</style>
</head>
<body>
<div class="app">
  <header>
    <div class="title">ソシオニクス 16タイプ関係ビューア</div>
    <div class="sub">タイプを2つタップ → 関係名と説明を表示。要求±／監督±は「入れ替え」で向きを確認。</div>
  </header>

  <main class="content">
    <!-- LEFT: type picker -->
    <section class="panel left" aria-label="タイプ選択">
      <div class="tabs" role="tablist">
        <button class="tab" role="tab" aria-selected="true" data-q="Alpha">α Alpha</button>
        <button class="tab" role="tab" aria-selected="false" data-q="Beta">β Beta</button>
        <button class="tab" role="tab" aria-selected="false" data-q="Gamma">γ Gamma</button>
        <button class="tab" role="tab" aria-selected="false" data-q="Delta">Δ Delta</button>
      </div>
      <div id="picker" class="grid" data-q="Alpha" aria-live="polite"></div>
      <div class="legend">選択は最大2件。同じタイプを2回タップで「同一関係」。長押し不要・タップのみでOK。</div>
    </section>

    <!-- RIGHT: details -->
    <section class="panel right" aria-label="関係の詳細">
      <div class="picked">
        <div class="chip" id="pickedA">選択1：—</div>
        <div class="chip" id="pickedB">選択2：—</div>
      </div>
      <div class="rel-title" id="relTitle">関係名 —</div>
      <div class="desc" id="relDesc">タイプを2つ選ぶと、ここに「〇〇関係」の説明が表示されます。</div>
      <div class="controls">
        <button class="action" id="resetBtn">リセット</button>
        <button class="action" id="swapBtn">入れ替え（向き確認）</button>
        <div class="share">
          <a id="shareX" class="action" role="button" href="#" target="_blank" rel="noopener">Xで共有</a>
        </div>
      </div>
      <div class="notice">説明は From Over the Sea を参照し要約しています。</div>
    </section>
  </main>

  <footer>© Socionics Viewer • モバイル最適 / PCでも快適に操作できます。</footer>
</div>

<script>
// === タイプ & クアドラ ===
const TYPES = ["ILE","SEI","ESE","LII","EIE","LSI","SLE","IEI","SEE","ILI","LIE","ESI","LSE","EII","IEE","SLI"];
const QUADRAS = {
  Alpha: TYPES.slice(0,4),
  Beta:  TYPES.slice(4,8),
  Gamma: TYPES.slice(8,12),
  Delta: TYPES.slice(12,16)
};

// === 行列表（From Over the Sea 表記） ===
const ROWS = {
"ILE": ["同","双","活","鏡","要+","監+","協","幻","超","消","似","衝","要-","監-","共","準"],
"SEI": ["双","同","鏡","活","監+","要+","幻","協","消","超","衝","似","監-","要-","準","共"],
"ESE": ["活","鏡","同","双","共","準","要-","監-","似","衝","超","消","協","幻","要+","監+"],
"LII": ["鏡","活","双","同","準","共","監-","要-","衝","似","消","超","幻","協","監+","要+"],
"EIE": ["要-","監-","共","準","同","双","活","鏡","要+","監+","協","幻","超","消","似","衝"],
"LSI": ["監-","要-","準","共","双","同","鏡","活","監+","要+","幻","協","消","超","衝","似"],
"SLE": ["協","幻","要+","監+","活","鏡","同","双","共","準","要-","監-","似","衝","超","消"],
"IEI": ["幻","協","監+","要+","鏡","活","双","同","準","共","監-","要-","衝","似","消","超"],
"SEE": ["超","消","似","衝","要-","監-","共","準","同","双","活","鏡","要+","監+","協","幻"],
"ILI": ["消","超","衝","似","監-","要-","準","共","双","同","鏡","活","監+","要+","幻","協"],
"LIE": ["似","衝","超","消","協","幻","要+","監+","活","鏡","同","双","共","準","要-","監-"],
"ESI": ["衝","似","消","超","幻","協","監+","要+","鏡","活","双","同","準","共","監-","要-"],
"LSE": ["要+","監+","協","幻","超","消","似","衝","要-","監-","共","準","同","双","活","鏡"],
"EII": ["監+","要+","幻","協","消","超","衝","似","監-","要-","準","共","双","同","鏡","活"],
"IEE": ["共","準","要-","監-","似","衝","超","消","協","幻","要+","監+","活","鏡","同","双"],
"SLI": ["準","共","監-","要-","衝","似","消","超","幻","協","監+","要+","鏡","活","双","同"]
};

// === ラベル & 説明（10行前後） ===
const NAME_MAP = {
  "同":"同一関係","双":"双対関係","活":"活性化関係","鏡":"鏡像関係",
  "共":"共鳴関係","準":"準双対関係","要+":"要求+（左：要求する側/恩恵を与える）",
  "要-":"要求-（左：要求される側/恩恵を受ける）",
  "監+":"監督+（左：監督する側）","監-":"監督-（左：監督される側）",
  "協":"協力関係","幻":"幻影関係","超":"超自我関係","消":"消滅関係",
  "似":"疑似同一関係","衝":"衝突関係"
};
const REL_TEXT = {
  "同": "・同タイプ同士で思考様式が一致し理解が速い。\n・言語や前提が近く説明コストが低い。\n・弱点も重なり盲点が強化されやすい。\n・新規性や相補性は乏しく停滞しやすい。\n・第三者や環境変化があると動きが出る。\n・学習や雑談は快適、役割分担は難しい。\n・対立は少ないが視野の狭さに注意。\n・似た癖が共鳴して失策が増えることも。\n・安心感は大きいが成長刺激は弱め。\n・短所：発展性に欠ける。長所：安定。",
  "双": "・モデルA上で互いの弱点を補い合う相補関係。\n・相手の第5/6機能に自然に栄養を与え合う。\n・初期は“予想外の助け”として体感しやすい。\n・価値観は近いが表現や手段は新鮮に映る。\n・疲弊時ほど癒やしと実用支援が効く。\n・誤解は小さく、対話で解けやすい。\n・生活面の協働や長期パートナーに適性。\n・理想視や過保護は窮屈さを生むので注意。\n・時間とともに安心と効率が高まる。\n・総評：最も補完的だが丁寧な摺合せが鍵。",
  "活": "・同クアドラ同士で価値が近く起動し合う。\n・互いの不足を素早く補い実務が加速する。\n・友人関係として一般的で始動が速い。\n・決定軸は異なるため長期では“あと一歩不足”。\n・短期プロジェクトや並走学習に向く。\n・励ましと具体的支援が多いが依存は弱い。\n・第三者（双対/鏡像）が入ると安定。\n・生活リズムのズレには配慮が必要。\n・快適度は高めだが山場は作りにくい。\n・軽やかさを活かしスプリント運用が◎。",
  "鏡": "・得意要素は同じで役割配置が逆の関係。\n・同じ課題を別角度から観察し学習相性が高い。\n・議論は噛み合うが方向性がズレて停滞も。\n・レビューや相互添削に最適。\n・目標と役割の明確化で成果が伸びる。\n・親密化はゆっくり、尊重が鍵。\n・価値が近く批判も比較的建設的。\n・第三者（活性/双対）が調整役になる。\n・短所：決定の遅さ。長所：理解の深さ。\n・学びと改善のパートナー。",
  "準": "・双対に近く、奇数機能が相手の期待に合致。\n・魅力と当惑が交互に訪れやすい“惜しい”関係。\n・短期では火花が散りやすく楽しい。\n・長期では決定打に欠け、疲れが溜まりやすい。\n・視野拡張の刺激源として有益。\n・定期的なすり合わせが必須。\n・双対の代替にはなるが回復力は弱い。\n・作業はスプリント式が向く。\n・誤解は増えやすいが悪意ではない。\n・適度な距離感が保ちやすさの鍵。",
  "幻": "・偶数機能が相手の期待に合致する“リラックス系”。\n・実用支援は得られるが暗示（第5機能）は欠く。\n・遠距離では好印象、近距離では物足りなさも。\n・価値は近いが主導機能に苛立ちが出やすい。\n・片方が自然に主導権を握る傾向。\n・レジャーや雑談は快適、真面目な協働は難。\n・“再教育したい欲求”に抗うのがコツ。\n・第三者がいると円滑になりやすい。\n・停滞と突然の噛み合いが交互に起きる。\n・安らぎ重視なら良好。",
  "要+": "・恩恵（要求）関係の与える側＝ベネファクター。\n・相手の弱点を自然に補助でき、教える立場に。\n・見返りが薄いと退屈・未評価感を抱きやすい。\n・境界と頻度を決め“押し付け”を避ける。\n・短期メンタリングに強いが長期固定は単調。\n・感謝の可視化が健全化に役立つ。\n・助けは具体的・小分けで渡すと効果的。\n・被要求側の自立を意識して設計を。\n・入替（向き）で役割を確認できる。\n・成果で循環を作ればWin-Winに。",
  "要-": "・恩恵（要求）関係の受ける側＝ベネフィシャリ。\n・相手からの支援が心地よく、甘えが生じやすい。\n・主体性を失うと成長が停滞する恐れ。\n・頼み方と感謝の設計で健全化。\n・コーチングを受け“成果で返す”がコツ。\n・卒業タイミングを決め依存を防ぐ。\n・短期で力を借りると大きく伸びる。\n・境界線と頻度を合意しておく。\n・自立課題を並走してもらうと良い。\n・向き（入替）で役割が逆になる。",
  "監+": "・監督関係の監督者側。要求が直接的になりがち。\n・相手の弱点を突き、緊張を生みやすい。\n・目的・範囲・時間を明確に区切ると良い。\n・短時間のコーチングには高効率。\n・感情調整役の第三者がいると安定。\n・“人格否定”に見えない言い回しを。\n・成功体験を小刻みに提示して導く。\n・私生活への干渉は避ける。\n・休止と振り返りで摩耗を防ぐ。\n・非対称関係ゆえ入替で立場確認を。",
  "監-": "・監督関係の被監督側。圧迫や誤解を感じやすい。\n・弱点を直球で突かれる感覚が生じやすい。\n・小さな成功と安全基地の設計が鍵。\n・助言は短く具体・段階的に依頼する。\n・時間制限とレビューで緊張を軽減。\n・適度な距離と第三者の通訳役が有効。\n・課題限定なら成果が出やすい。\n・高頻度は避け、スポット利用が現実的。\n・自律的に選ぶ部分を残す。\n・向き（入替）で役割が逆になる。",
  "共": "・共通要素が多く礼節的で穏やかな関係。\n・興味は重なるが“心からの関心”はやや薄い。\n・停滞と退屈のリスク。\n・上下が付くと摩擦が広がりやすい。\n・仕事の方式の違いで誤解しやすい。\n・妥協と役割明確化で安定。\n・第三者の存在で交流が活性化。\n・距離は中間〜遠目が楽。\n・短所：進展の遅さ。長所：安定。\n・平和的協調を目指すと良い。",
  "協": "・偶数機能が共通し、手法や話法が似る。\n・理解は容易で実務連携がしやすい。\n・深掘りは少なく縁が切れやすい。\n・競争が弱く摩擦が少ない。\n・並走タスクや情報交換に適性。\n・親密さより効率重視で良好。\n・定期点検だけで回りやすい。\n・成果連携＞感情共有で設計。\n・短所：浅い・飽きやすい。\n・長所：摩擦が少なく扱いやすい。",
  "消": "・価値は近いが主導と無視の対応で“すれ違い”。\n・同じ対象に関心はあるがアプローチが不可解。\n・遠距離では刺激、近距離では消耗になりやすい。\n・成果物の交換はできるが共同は難。\n・感情議論よりルール運用が現実的。\n・第三者がいると摩擦が減る。\n・境界線と休止を前提に。\n・関係は波打ちやすく安定しにくい。\n・学びはあるが代償も大きい。\n・長期伴侶には不向き。",
  "超": "・第2/第3チャネルが重複し第1は異なる配置。\n・弱点を突然突かれ緊張や危険を感じやすい。\n・表面上は友好的に見えることもある。\n・“正しさ”のぶつけ合いで消耗しやすい。\n・評価より情報共有を優先して緩和。\n・近距離は控え、環境要因の影響が大。\n・観客付きの場だと関係が和らぐ。\n・痛点の自覚には役立つ。\n・高いメタ認知が必要。\n・距離と休止を戦略的に。",
  "似": "・外見上は似ているが決定軸がズレる関係。\n・主導/創造の組み合わせが違い、噛み合いにくい。\n・理解は容易でも“物足りなさ”が残りやすい。\n・連携は可もなく不可もなし。\n・近すぎると相違が目立ち距離が必要。\n・互いの強みを学ぶ教材にはなる。\n・第三者がいると動きが出る。\n・軽い共同や趣味は可。\n・深い依存や同居は非推奨。\n・安定するが火力は弱い。",
  "衝": "・価値・期待が真逆で最も緊張が高い。\n・互いの行為を自己否定と受け取りがち。\n・交流は短く限定し距離を十分に。\n・第三者やルールを挟んで誤解を減らす。\n・避けられない場合は責務の最小化を。\n・学びは大きいが代償も大きい。\n・状況やサブタイプで体感差はある。\n・感情応酬より合意形成の枠組みを。\n・基本は離れるのが最適解。\n・緊急支援時のみ短期協働。"
};

// === 状態 ===
const picked = [null, null];

// === UI構築 ===
function renderPicker(q){
  const holder = document.getElementById('picker');
  holder.dataset.q = q;
  holder.innerHTML = '';
  QUADRAS[q].forEach(t => {
    const btn = document.createElement('button');
    btn.className = 'type-btn';
    btn.type = 'button';
    btn.textContent = t;
    btn.setAttribute('data-type', t);
    btn.setAttribute('aria-pressed', 'false');
    holder.appendChild(btn);
  });
  bindTypeButtons();
  restoreSelectedVisual();
}
function restoreSelectedVisual(){
  document.querySelectorAll('.type-btn').forEach(b=>{
    const t = b.getAttribute('data-type');
    if (picked.includes(t)) b.classList.add('selected');
  });
}
function setTab(q){
  document.querySelectorAll('.tab').forEach(tab=>{
    const active = tab.dataset.q === q;
    tab.setAttribute('aria-selected', active ? 'true':'false');
  });
  renderPicker(q);
}

function updateUI(){
  document.getElementById('pickedA').textContent = `選択1：${picked[0] ?? "—"}`;
  document.getElementById('pickedB').textContent = `選択2：${picked[1] ?? "—"}`;
  const t = document.getElementById('relTitle'), d = document.getElementById('relDesc');
  if(!picked[0] || !picked[1]){ t.textContent="関係名 —"; d.textContent="タイプを2つ選ぶと、ここに「〇〇関係」の説明が表示されます。"; return; }
  const rowKey = picked[0], colKey = picked[1];
  const j = TYPES.indexOf(colKey);
  const token = ROWS[rowKey]?.[j];
  if(token){ t.textContent = NAME_MAP[token]; d.textContent = REL_TEXT[token]; }
  else { t.textContent = "関係データ未設定"; d.textContent = `${rowKey} と ${colKey} の組み合わせは未登録です。`; }
  // X共有（intent）
  const shareText = `${rowKey} × ${colKey} → ${t.textContent}`;
  const url = location.href; // 公開URL
  const q = new URLSearchParams({ text: shareText, url }).toString();
  document.getElementById('shareX').href = `https://twitter.com/intent/tweet?${q}`;
}

function clearSel(){
  const q = document.querySelector('.tab[aria-selected="true"]').dataset.q;
  picked[0]=null; picked[1]=null;
  renderPicker(q);
  updateUI();
}

function onPick(t, btn){
  if(!picked[0]){ picked[0]=t; btn.classList.add('selected'); btn.setAttribute('aria-pressed','true'); }
  else if(!picked[1]){ picked[1]=t; btn.classList.add('selected'); btn.setAttribute('aria-pressed','true'); }
  else {
    const q = document.querySelector('.tab[aria-selected="true"]').dataset.q;
    picked[0]=t; picked[1]=null;
    renderPicker(q);
  }
  updateUI();
}

// robust: pointer（タッチ/マウス/ペン）統一
function bindTypeButtons(){
  document.querySelectorAll('.type-btn').forEach(btn=>{
    const t = btn.getAttribute('data-type');
    btn.addEventListener('pointerup', (e)=>{ e.preventDefault(); onPick(t, btn); }, {passive:false});
    btn.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); onPick(t, btn);} });
  });
}

// タブ
document.querySelectorAll('.tab').forEach(tab=>{
  tab.addEventListener('pointerup', (e)=>{ e.preventDefault(); setTab(tab.dataset.q); }, {passive:false});
  tab.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); setTab(tab.dataset.q);} });
});

// コントロール
document.getElementById('resetBtn').addEventListener('pointerup', (e)=>{ e.preventDefault(); clearSel(); }, {passive:false});
document.getElementById('swapBtn').addEventListener('pointerup', (e)=>{ e.preventDefault(); if(picked[0]&&picked[1]){ [picked[0],picked[1]]=[picked[1],picked[0]]; updateUI(); } }, {passive:false});

// 初期化
setTab('Alpha');
updateUI();
</script>
</body>
</html>
